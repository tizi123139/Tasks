# 第七阶段学习笔记

---

## 一.MYSQL

### 1.MYSQL前世今生

1. **诞生背景**：20 世纪 70 年代和 80 年代，关系型数据库管理系统（RDBMS）开始兴起，如 IBM 的 DB2 和 Oracle 等商业数据库。但当时这些数据库系统价格昂贵，且对硬件要求较高，普通用户和小型企业难以承受。在这样的背景下，开源数据库开始崭露头角。
2. **MySQL 的起源**：MySQL 的开发始于 1979 年，创始人是瑞典的 Michael Widenius 。最初，他开发了一个名为 Unireg 的小型数据库系统，用于管理自己的商业数据。随着业务的发展，Unireg 逐渐无法满足需求，于是 Michael 决定开发一个新的数据库系统。
3. **MySQL 的命名**：1994 年，Michael 与 David Axmark 和 Allan Larsson 合作，开始开发 MySQL 数据库。“MySQL” 中的 “My” 来自 Michael 的女儿 My，而 “SQL” 则代表结构化查询语言（Structured Query Language），这是用于与关系型数据库进行交互的标准语言。
4. **初始版本发布**：1995 年，MySQL 1.0 版本发布。尽管最初的版本功能相对简单，但它以其快速、可靠和开源的特点，吸引了一些早期用户。随后，MySQL 不断更新和完善，功能逐渐丰富，包括支持更多的数据类型、更好的事务处理等。

### 2.数据表结构

数据表就像一个二维表格，由行（记录）和列（字段）组成。

- 字段（列）：

  字段是数据表中的一列，每个字段都有一个唯一的名称和特定的数据类型。

  常见数据类型：

  （1）数值类型

  整数型，浮点型，定点型

  （2）字符串类型

  VARCHAR,CHAR,TEXT

  （3）日期时间类型

  TIME,DATE,DATETIME

- 记录（行）：

  记录是数据表中的一行，包含了各个字段对应的值。

- 主键：

  主键是表中的一个或多个字段，用于唯一标识表中的每一条记录。主键的值不能重复，也不能为 `NULL`。

![image-20250218203546524](C:\Users\tizi\AppData\Roaming\Typora\typora-user-images\image-20250218203546524.png)

### 3.不同表之间建立联系

示例：

表一：员工（employees）

| id   | name    | department_id |
| ---- | ------- | ------------- |
| 1    | Alice   | 1             |
| 2    | Bob     | 2             |
| 3    | Charlie | NULL          |
| 4    | David   | 3             |

表二：部门（departments）

| id   | department_name |
| ---- | --------------- |
| 1    | HR              |
| 2    | Finance         |
| 3    | IT              |
| 4    | Marketing       |

- **内连接**（INNER JOIN）

  返回两个表中符合条件的匹配记录。

  ```
  SELECT a.列名, b.列名 
  FROM 表1 AS a 
  INNER JOIN 表2 AS b 
  ON a.列名 = b.列名;
  ```

  结果：

  | name  | department_name |
  | ----- | --------------- |
  | Alice | HR              |
  | Bob   | Finance         |
  | David | IT              |

  

- **左外连接**（LEFT JOIN）

  返回左表中的所有记录。

  ```
  SELECT a.列名, b.列名 
  FROM 表1 AS a 
  LEFT JOIN 表2 AS b 
  ON a.列名 = b.列名;
  ```

  结果：

  | name    | department_name |
  | ------- | --------------- |
  | Alice   | HR              |
  | Bob     | Finance         |
  | Charlie | NULL            |
  | David   | IT              |

- **右外连接**（RIGHT JOIN）

  返回右表中的所有记录。

  ```
  SELECT a.列名, b.列名 
  FROM 表1 AS a 
  RIGHT JOIN 表2 AS b 
  ON a.列名 = b.列名;
  ```

  结果：

  | name  | department_name |
  | ----- | --------------- |
  | Alice | HR              |
  | Bob   | Finance         |
  | David | IT              |
  | NULL  | Marketing       |

- **全外连接**（FULL JOIN）

  返回两个表中的所有记录，如果没有匹配项，未匹配的一方数据列显示为 `NULL`。

  ```
  SELECT a.列名, b.列名 
  FROM 表1 AS a 
  FULL JOIN 表2 AS b 
  ON a.列名 = b.列名;
  ```

  结果：

  | name    | department_name |
  | ------- | --------------- |
  | Alice   | HR              |
  | Bob     | Finance         |
  | Charlie | NULL            |
  | David   | IT              |
  | NULL    | Marketing       |

- **自连接**（SELF JOIN）

  用于将一个表与自身进行连接。

  ```
  SELECT a.列名 AS Employee, b.列名 AS Manager 
  FROM 表名 AS a 
  INNER JOIN 表名 AS b 
  ON a.列名 = b.列名;
  ```

- **交叉连接**（CROSS JOIN）

  返回两个表的笛卡尔积，即没有条件地将每个表的每一条记录组合起来。**结果集的行数等于两个表的行数相乘**。

  ```
  SELECT a.列名, b.列名 
  FROM 表1 AS a 
  CROSS JOIN 表2 AS b;
  ```

  结果：

  | name    | department_name |
  | ------- | --------------- |
  | Alice   | HR              |
  | Alice   | Finance         |
  | Alice   | IT              |
  | Alice   | Marketing       |
  | Bob     | HR              |
  | Bob     | Finance         |
  | Bob     | IT              |
  | Bob     | Marketing       |
  | Charlie | HR              |
  | Charlie | Finance         |
  | Charlie | IT              |
  | Charlie | Marketing       |
  | David   | HR              |
  | David   | Finance         |
  | David   | IT              |
  | David   | Marketing       |

- **自然连接**（NATURAL JOIN）

  根据两个表中相同名称的列自动进行匹配连接。

  ```
  SELECT 列名 
  FROM 表1 
  NATURAL JOIN 表2;
  ```

  | name  | department_name |
  | ----- | --------------- |
  | Alice | HR              |
  | Bob   | Finance         |
  | David | IT              |

### 4.SQL查询语句（CURD）

- Create

  允许用户在数据库中创建新记录。

  ```
  INSERT INTO TableName (column1,column2,column3,...)
  VALUES (value1,value2,value3,...)
  ```

- Read

  允许用户搜索和检索表中的特定记录并读取它们的值。

  ```
  SELECT field 1, field 2, …FROM <table name> [WHERE <condition>]
  ```

- Update

  用于修改数据库中存在的现有记录。

  ```
  UPDATE <table name> SET field1=value1, field2=value2,… [WHERE <condition>]
  ```

- Delete

  允许用户从数据库中删除不再需要的记录。

  ```
  DELETE FROM <table name> [WHERE <condition>]
  ```

  

参考资料：

[MySQL 的前世今生 | MySQL 技术论坛](https://learnku.com/articles/40537)

[Mysql是什么？架构是怎么样的？](https://www.bilibili.com/video/BV1p5qhYsE4f?vd_source=ae034611a7f72152d7de75a14e183107)

[MySQL数据表的基础知识及表结构的常用操作_数据库表结构-CSDN博客](https://blog.csdn.net/yuzhiqiang_1993/article/details/81360320)

[数据库表与表之间的连接方式_数据库表连接-CSDN博客](https://blog.csdn.net/weixin_64122713/article/details/139480564?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-1-139480564-blog-113890027.235^v43^pc_blog_bottom_relevance_base2&spm=1001.2101.3001.4242.2&utm_relevant_index=4)

[SQL 随笔记: 常见的表连接方式_sql表连接-CSDN博客](https://blog.csdn.net/DaPiCaoMin/article/details/143230556?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-1-143230556-blog-132500884.235^v43^pc_blog_bottom_relevance_base2&spm=1001.2101.3001.4242.2&utm_relevant_index=4)

[小白入门：什么是CURD？-CSDN博客](https://blog.csdn.net/weixin_43025343/article/details/127718989)

[【MySQL】简单的CURD操作_数据库curd-CSDN博客](https://blog.csdn.net/MO_lion/article/details/140236781?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-9-140236781-blog-127718989.235^v43^pc_blog_bottom_relevance_base2&spm=1001.2101.3001.4242.6&utm_relevant_index=12)

---

## 二.Gorm

### 3.在GO项目中添加GORM

- 安装 GORM

使用 `go get` 命令安装 GORM：

```sh
go get -u gorm.io/gorm
```

- 安装 MySQL 驱动

GORM 操作 MySQL 需要对应的驱动，使用以下命令安装：

```sh
go get -u gorm.io/driver/mysql
```

- 编写代码使用 GORM

### 4.配置并连接到Mysql的数据库

- 安装 GORM 和 MySQL 驱动

- 编写连接代码

  DSN（数据源名称）：`dsn` 包含了连接数据库所需的所有信息，格式为 

  ```
  user:password@tcp(host:port)/dbname?charset=utf8mb4&parseTime=true&loc=Local
  ```

`gorm.Open`：用于打开一个数据库连接，返回一个 `*gorm.DB` 对象。

`db.AutoMigrate`：该方法会根据定义的模型结构体自动创建或更新对应的数据库表结构。

### 5.Gorm基础操作



参考资料：

[【GORM简明教程】关于GORM你看这一个就够了](https://www.bilibili.com/video/BV1U7411V78R?p=2&vd_source=ae034611a7f72152d7de75a14e183107)

---

